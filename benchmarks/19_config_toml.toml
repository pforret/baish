[workspace]
resolver = "2"
members = [
# tidy-alphabetical-start
  "compiler/rustc",
  "src/build_helper",
  "src/rustc-std-workspace/rustc-std-workspace-alloc",
  "src/rustc-std-workspace/rustc-std-workspace-core",
  "src/rustc-std-workspace/rustc-std-workspace-std",
  "src/rustdoc-json-types",
  "src/tools/build-manifest",
  "src/tools/bump-stage0",
  "src/tools/cargotest",
  "src/tools/clippy",
  "src/tools/clippy/clippy_dev",
  "src/tools/collect-license-metadata",
  "src/tools/compiletest",
  "src/tools/coverage-dump",
  "src/tools/features-status-dump",
  "src/tools/generate-copyright",
  "src/tools/generate-windows-sys",
  "src/tools/html-checker",
  "src/tools/jsondocck",
  "src/tools/jsondoclint",
  "src/tools/linkchecker",
  "src/tools/lint-docs",
  "src/tools/lld-wrapper",
  "src/tools/llvm-bitcode-linker",
  "src/tools/miri",
  "src/tools/miri/cargo-miri",
  "src/tools/miropt-test-tools",
  "src/tools/opt-dist",
  "src/tools/remote-test-client",
  "src/tools/remote-test-server",
  "src/tools/replace-version-placeholder",
  "src/tools/run-make-support",
  "src/tools/rust-installer",
  "src/tools/rustdoc",
  "src/tools/rustdoc-gui-test",
  "src/tools/rustdoc-themes",
  "src/tools/rustfmt",
  "src/tools/test-float-parse",
  "src/tools/tidy",
  "src/tools/tier-check",
  "src/tools/unicode-table-generator",
  "src/tools/unstable-book-gen",
  "src/tools/wasm-component-ld",
  "src/tools/x",
# tidy-alphabetical-end
]

exclude = [
  "build",
  "compiler/rustc_codegen_cranelift",
  "compiler/rustc_codegen_gcc",
  "src/bootstrap",
  "tests/rustdoc-gui",
  # HACK(eddyb) This hardcodes the fact that our CI uses `/checkout/obj`.
  "obj",
]

[profile.release.package.rustc_thread_pool]
# The rustc fork of Rayon has deadlock detection code which intermittently
# causes overflows in the CI (see https://github.com/rust-lang/rust/issues/90227)
# so we turn overflow checks off for now.
# FIXME: This workaround should be removed once #90227 is fixed.
overflow-checks = false

# These are very thin wrappers around executing lld with the right binary name.
# Basically nothing within them can go wrong without having been explicitly logged anyway.
# We ship these in every rustc tarball and even after compression they add up
# to around 0.6MB of data every user needs to download (and 15MB on disk).
[profile.release.package.lld-wrapper]
debug = 0
strip = true
[profile.release.package.wasm-component-ld-wrapper]
debug = 0
strip = true

# Bigint libraries are slow without optimization, speed up testing
[profile.dev.package.test-float-parse]
opt-level = 3

# Speed up the binary as much as possible
[profile.release.package.test-float-parse]
opt-level = 3
codegen-units = 1
# FIXME: LTO cannot be enabled for binaries in a workspace
# <https://github.com/rust-lang/cargo/issues/9330>
# lto = true

# If you want to use a crate with local modifications, you can set a path or git dependency here.
# For git dependencies, also add your source to ALLOWED_SOURCES in src/tools/tidy/src/extdeps.rs.
#[patch.crates-io]

# Copyright 2018-2025 the Deno authors. MIT license.

[workspace]
resolver = "2"
members = [
  "bench_util",
  "cli",
  "cli/lib",
  "cli/rt",
  "cli/snapshot",
  "ext/bundle",
  "ext/cache",
  "ext/canvas",
  "ext/cron",
  "ext/crypto",
  "ext/fetch",
  "ext/ffi",
  "ext/fs",
  "ext/http",
  "ext/io",
  "ext/kv",
  "ext/napi",
  "ext/napi/sym",
  "ext/net",
  "ext/node",
  "ext/rt_helper",
  "ext/signals",
  "ext/telemetry",
  "ext/url",
  "ext/web",
  "ext/webgpu",
  "ext/webidl",
  "ext/websocket",
  "ext/webstorage",
  "libs/config",
  "libs/crypto",
  "libs/maybe_sync",
  "libs/node_resolver",
  "libs/npm_cache",
  "libs/npm_installer",
  "libs/package_json",
  "libs/resolver",
  "libs/typescript_go_client",
  "runtime",
  "runtime/features",
  "runtime/permissions",
  "runtime/subprocess_windows",
  "tests",
  "tests/ffi",
  "tests/napi",
  "tests/sqlite_extension_test",
  "tests/util/server",
]
exclude = ["tests/util/std/hash/_wasm"]

[workspace.package]
authors = ["the Deno authors"]
edition = "2024"
license = "MIT"
repository = "https://github.com/denoland/deno"

[workspace.dependencies]
deno_ast = { version = "=0.50.3", features = ["transpiling"] }
deno_core = { version = "0.370.0" }

deno_cache_dir = "=0.25.0"
deno_doc = "=0.186.0"
deno_error = "=0.7.0"
deno_graph = { version = "=0.103.1", default-features = false }
deno_lint = "=0.80.0"
deno_lockfile = "=0.32.2"
deno_media_type = { version = "=0.2.9", features = ["module_specifier"] }
deno_native_certs = "0.3.0"
deno_npm = "=0.42.0"
deno_path_util = "=0.6.4"
deno_semver = "=0.9.1"
deno_task_shell = "=0.26.0"
deno_terminal = "=0.2.3"
deno_unsync = { version = "0.4.4", default-features = false }
deno_whoami = "0.1.0"
eszip = "=0.104.0"

denokv_proto = "0.13.0"
denokv_remote = "0.13.0"
# denokv_sqlite brings in bundled sqlite if we don't disable the default features
denokv_sqlite = { default-features = false, version = "0.13.0" }

# exts
deno_bundle_runtime = { version = "0.8.0", path = "./ext/bundle" }
deno_cache = { version = "0.153.0", path = "./ext/cache" }
deno_canvas = { version = "0.90.0", path = "./ext/canvas" }
deno_cron = { version = "0.101.0", path = "./ext/cron" }
deno_crypto = { version = "0.235.0", path = "./ext/crypto" }
deno_fetch = { version = "0.245.0", path = "./ext/fetch" }
deno_ffi = { version = "0.208.0", path = "./ext/ffi" }
deno_fs = { version = "0.131.0", path = "./ext/fs" }
deno_http = { version = "0.219.0", path = "./ext/http" }
deno_io = { version = "0.131.0", path = "./ext/io" }
deno_kv = { version = "0.129.0", path = "./ext/kv" }
deno_napi = { version = "0.152.0", path = "./ext/napi" }
deno_net = { version = "0.213.0", path = "./ext/net" }
deno_node = { version = "0.159.0", path = "./ext/node" }
deno_os = { version = "0.38.0", path = "./ext/os" }
deno_process = { version = "0.36.0", path = "./ext/process" }
deno_signals = { version = "0.12.0", path = "./ext/signals" }
deno_telemetry = { version = "0.43.0", path = "./ext/telemetry" }
deno_tls = { version = "0.208.0", path = "./ext/tls" }
deno_web = { version = "0.252.0", path = "./ext/web" }
deno_webgpu = { version = "0.188.0", path = "./ext/webgpu" }
deno_webidl = { version = "0.221.0", path = "./ext/webidl" }
deno_websocket = { version = "0.226.0", path = "./ext/websocket" }
deno_webstorage = { version = "0.216.0", path = "./ext/webstorage" }
denort_helper = { version = "0.19.0", path = "./ext/rt_helper" }

# workspace libraries
deno_bench_util = { version = "0.215.0", path = "./bench_util" }
deno_config = { version = "0.71.0", features = ["workspace"], path = "./libs/config" }
deno_crypto_provider = { version = "0.15.0", path = "./libs/crypto" }
deno_features = { version = "0.18.0", path = "./runtime/features" }
deno_lib = { version = "0.39.0", path = "./cli/lib" }
deno_maybe_sync = { version = "0.8.0", path = "./libs/maybe_sync" }
deno_npm_cache = { version = "0.40.0", path = "./libs/npm_cache" }
deno_npm_installer = { version = "0.16.0", path = "./libs/npm_installer" }
deno_package_json = { version = "0.23.0", default-features = false, path = "./libs/package_json" }
deno_permissions = { version = "0.80.0", path = "./runtime/permissions" }
deno_resolver = { version = "0.52.0", path = "./libs/resolver" }
deno_runtime = { version = "0.229.0", path = "./runtime" }
deno_snapshots = { version = "0.36.0", path = "./cli/snapshot" }
deno_subprocess_windows = { path = "./runtime/subprocess_windows", version = "0.16.0" }
deno_typescript_go_client_rust = { version = "0.3.0", path = "./libs/typescript_go_client" }
napi_sym = { version = "0.151.0", path = "./ext/napi/sym" }
node_resolver = { version = "0.59.0", path = "./libs/node_resolver" }
test_util = { package = "test_server", path = "./tests/util/server" }

deno_tunnel = "0.8.0"

# widely used libraries
anyhow = "1.0.57"
arc-swap = "1.7"
async-compression = "0.4"
async-once-cell = "0.5.4"
async-stream = "0.3"
async-trait = "0.1.73"
aws-lc-rs = { version = "1.13.1" }
aws-lc-sys = { version = "0.29.0" }
base32 = "=0.5.1"
base64 = "0.22.1"
base64-simd = "0.8"
bencher = "0.1"
boxed_error = "0.2.3"
brotli = { version = "6.0.0", features = ["ffi-api"] }
bytemuck = "1.17.1"
bytes = "1.4.0"
cache_control = "=0.2.0"
capacity_builder = "0.5.0"
cbc = { version = "=0.1.2", features = ["alloc"] }
# Note: Do not use the "clock" feature of chrono, as it links us to CoreFoundation on macOS.
#       Instead use util::time::utc_now()
chrono = { version = "0.4", default-features = false, features = ["std", "serde"] }
color-print = "0.3.5"
dashmap = "5.5.3"
data-encoding = "2.3.3"
data-url = "=0.3.1"
dotenvy = "0.15.7"
dyn-clone = "1"
encoding_rs = "=0.8.35"
error_reporter = "1"
fast-socks5 = "0.9.6"
faster-hex = "0.10.0"
fastwebsockets = { version = "0.8", features = ["upgrade", "unstable-split"] }
file_test_runner = "0.7.3"
filetime = "0.2.16"
flaky_test = "=0.2.2"
flate2 = { version = "1.0.30", default-features = false }
fqdn = "0.4.6"
fs3 = "0.5.0"
futures = "0.3.31"
glob = "0.3.1"
h2 = "0.4.6"
hickory-proto = "0.25.2"
hickory-resolver = { version = "0.25.2", features = ["tokio", "serde"] }
hickory-server = "0.25.2"
http = "1.0"
http-body = "1.0"
http-body-util = "0.1.2"
http_v02 = { package = "http", version = "0.2.9" }
httparse = "1.8.0"
hyper = { version = "1.6.0", features = ["full"] }
hyper-rustls = { version = "0.27.2", default-features = false, features = ["http1", "http2", "tls12", "aws-lc-rs"] }
hyper-util = { version = "0.1.17", features = ["tokio", "client", "client-legacy", "server", "server-auto"] }
hyper_v014 = { package = "hyper", version = "0.14.26", features = ["runtime", "http1"] }
idna = "1.0.3"
ignore = "0.4"
import_map = { version = "0.24.0", features = ["ext"] }
indexmap = { version = "2", features = ["serde"] }
ipnet = "2.3"
ipnetwork = "0.20.0"
itertools = "0.14"
jsonc-parser = { version = "0.27.1", features = ["serde"] }
jupyter_runtime = "=0.19.0"
lazy-regex = "3"
libc = "0.2.168"
libz-sys = { version = "1.1.20", default-features = false }
log = { version = "0.4.28", features = ["kv"] }
lsp-types = "=0.97.0" # used by tower-lsp and "proposed" feature is unstable in patch releases
memchr = "2.7.4"
mime = "0.3.16"
monch = "=0.5.0"
netif = "0.1.6"
notify = "=6.1.1"
ntest_timeout = "0.9.3"
num-bigint = { version = "0.4", features = ["rand"] }
num-bigint-dig = "0.8.2"
num-integer = "0.1.45"
num-traits = "0.2.19"
once_cell = "1.17.1"
os_pipe = { version = "=1.2.1", features = ["io_safety"] }
parking_lot = "0.12.0"
path-clean = "=0.1.0"
percent-encoding = "2.3.0"
phf = { version = "0.11", features = ["macros"] }
pin-project = "1.0.11" # don't pin because they yank crates from cargo
pin-project-lite = "0.2.13"
pretty_assertions = "=1.4.1"
prost = "0.13"
prost-build = "0.13"
quick-junit = "0.3.5"
quinn = { version = "0.11.8", default-features = false }
rand = "=0.8.5"
rayon = "1.8.0"
regex = "^1.7.0"
reqwest = { version = "=0.12.5", default-features = false, features = ["rustls-tls", "stream", "gzip", "brotli", "socks", "json", "http2"] } # pinned because of https://github.com/seanmonstar/reqwest/pull/1955
rusqlite = { version = "0.37.0", features = ["unlock_notify", "bundled", "session", "modern_sqlite", "limits", "backup"] } # "modern_sqlite": need sqlite >= 3.49.0 for some db configs
rustls = { version = "=0.23.28", default-features = false, features = ["logging", "std", "tls12", "aws_lc_rs"] }
rustls-pemfile = "2"
rustls-tokio-stream = "=0.8.0"
rustls-webpki = "0.102"
rustyline = "=13.0.0"
rustyline-derive = "=0.7.0"
saffron = "=0.1.0"
same-file = "1.0.6"
scopeguard = "1.2.0"
semver = "=1.0.25"
serde = { version = "1.0.149", features = ["derive"] }
serde-value = "0.7"
serde_bytes = "0.11"
serde_json = "1.0.85"
serde_repr = "=0.1.19"
shlex = "1.3.0"
signal-hook = "0.3"
simd-json = "0.14.0"
slab = "0.4"
smallvec = "1.8"
socket2 = { version = "0.5.3", features = ["all"] }
sys_traits = "=0.1.17"
tar = "=0.4.43"
tempfile = "3.4.0"
termcolor = "1.1.3"
thiserror = "2.0.12"
tokio = { version = "1.47.1", features = ["full"] }
tokio-eld = "0.2"
tokio-metrics = { version = "0.3.0", features = ["rt"] }
tokio-rustls = { version = "0.26.0", default-features = false, features = ["aws_lc_rs", "tls12"] }
tokio-socks = "0.5.1"
tokio-util = "0.7.16"
tower = { version = "0.5.2", default-features = false, features = ["retry", "util"] }
tower-http = { version = "0.6.1", features = ["decompression-br", "decompression-gzip"] }
tower-lsp = { package = "deno_tower_lsp", version = "=0.4.3", features = ["proposed"] }
tower-service = "0.3.2"
tracing = "0.1"
tracing-opentelemetry = "0.28.0"
tracing-subscriber = "0.3.20"
twox-hash = { version = "=2.1.0", features = ["std", "xxhash64"], default-features = false }
typed-arena = "=2.0.2"
url = { version = "2.5", features = ["serde", "expose_internals"] }
urlpattern = "0.3.0"
uuid = { version = "1.3.0", features = ["v4"] }
walkdir = "=2.5.0"
weak-table = "0.3.2"
web-transport-proto = "0.2.7"
webpki-root-certs = "0.26.5"
webpki-roots = "0.26"
which = { version = "8.0.0", default-features = false }
yoke = { version = "0.7.4", features = ["derive"] }
zeromq = { version = "=0.4.1", default-features = false, features = ["tcp-transport", "tokio-runtime"] }
zip = { version = "2.4.1", default-features = false, features = ["flate2"] }

opentelemetry = "0.27.0"
opentelemetry-http = "0.27.0"
opentelemetry-otlp = { version = "0.27.0", features = ["logs", "http-proto", "http-json", "populate-logs-event-name"] }
opentelemetry-semantic-conventions = { version = "0.27.0", features = ["semconv_experimental"] }
opentelemetry_sdk = { version = "0.27.0", features = ["rt-tokio", "trace"] }

# canvas
image = { version = "0.25.4", default-features = false }
lcms2 = "6.1.0"

# cli
anstream = "0.6.14"
bincode = "=1.3.3"
clap = "=4.5.47"
clap_complete = { version = "=4.5.57", features = ["unstable-dynamic"] }
clap_complete_fig = "=4.5.2"
console_static_text = "=0.8.3"
crossterm = "0.28.1"
dhat = "0.3.3"
dissimilar = "=1.0.9"
dprint-core = "=0.67.4"
dprint-plugin-json = "=0.21.0"
dprint-plugin-jupyter = "=0.2.1"
dprint-plugin-markdown = "=0.20.0"
dprint-plugin-typescript = "=0.95.11"
env_logger = "=0.11.6"
fancy-regex = "=0.14.0"
libsui = "0.11.0"
malva = "=0.12.1"
markup_fmt = "=0.22.0"
open = "5.0.1"
pathdiff = "0.2.1"
pretty_yaml = "=0.5.0"
rustc-hash = "2.1.1"
sqlformat = "=0.3.5"
strsim = "0.11.1"
text-size = "=1.1.1"
text_lines = "=0.6.0"
unicode-width = "0.1.3"
zstd = "=0.13.2"

# crypto
aead-gcm-stream = "0.4"
aes = "=0.8.3"
aes-gcm = "0.10"
aes-kw = "0.2.1"
blake2 = "0.10.6"
const-oid = "0.9.5"
ctr = { version = "0.9.2", features = ["alloc"] }
curve25519-dalek = "4.1.3"
der = "0.7.9"
digest = "0.10.5"
dsa = "0.6.3"
ecb = "=0.1.2"
ecdsa = "0.16.9"
ed25519-dalek = "2.1.1"
ed448-goldilocks = "0.8.3"
elliptic-curve = { version = "0.13.4", features = ["alloc", "arithmetic", "ecdh", "std", "pem", "jwk"] }
hkdf = "0.12.3"
k256 = "0.13.1"
md-5 = "0.10.5"
md4 = "0.10.2"
p224 = { version = "0.13.0", features = ["ecdh"] }
p256 = { version = "0.13.2", features = ["ecdh", "jwk"] }
p384 = { version = "0.13.0", features = ["ecdh", "jwk"] }
p521 = "0.13.3"
pbkdf2 = "0.12.1"
pkcs8 = "0.10.2"
ripemd = "0.1.3"
rsa = { version = "0.9.3", default-features = false, features = ["std", "pem", "hazmat"] } # hazmat needed for PrehashSigner in ext/node
scrypt = "0.11.0"
sec1 = "0.7"
sha1 = { version = "0.10.6", features = ["oid"] }
sha2 = { version = "0.10.8", features = ["oid"] }
sha3 = "0.10.8"
signature = "2.1"
sm3 = "0.4.2"
spki = "0.7.2"
x25519-dalek = "2.0.0"
x509-parser = "0.15.0"

# ffi
cranelift = "0.116"
cranelift-native = "0.116"
dlopen2 = "0.6.1"
libffi = "=4.1.2"
libffi-sys = "=3.3.3"
memmap2 = "0.9"

# napi
libloading = "0.7"
libuv-sys-lite = "=1.48.2"
napi-build = "1"
napi-sys = { version = "=2.2.2", default-features = false }

# webgpu
raw-window-handle = "0.6.0"
wgpu-core = "24.0.0"
wgpu-types = "24.0.0"

# macros
quote = "1"
syn = { version = "2", features = ["full", "extra-traits"] }

# unix deps
nix = "=0.27.1"
tokio-vsock = "0.7"

# windows deps
junction = "=1.2.0"
win32job = "2"
winapi = "=0.3.9"
windows-sys = { version = "0.59.0", features = ["Win32_Foundation", "Win32_Media", "Win32_Storage_FileSystem", "Win32_System_IO", "Win32_System_WindowsProgramming", "Wdk", "Wdk_System", "Wdk_System_SystemInformation", "Win32_Security", "Win32_System_Pipes", "Wdk_Storage_FileSystem", "Win32_System_Registry", "Win32_System_Kernel", "Win32_System_Threading", "Win32_UI", "Win32_UI_Shell"] }
winres = "=0.1.12"

[profile.release]
codegen-units = 1
incremental = true
lto = true
opt-level = 'z' # Optimize for size
split-debuginfo = "packed"
debug = "line-tables-only"

# Build release with debug symbols: cargo build --profile=release-with-debug
[profile.release-with-debug]
inherits = "release-lite"
debug = true

# Faster to compile than `release` but with similar performance.
[profile.release-lite]
inherits = "release"
codegen-units = 128
lto = "thin"

# Key generation is too slow on `debug`
[profile.dev.package.num-bigint-dig]
opt-level = 3

# rusty-v8 needs at least -O1 to not miscompile
[profile.dev.package.v8]
opt-level = 1

[profile.release.package.async-compression]
opt-level = 3
[profile.release.package.base64-simd]
opt-level = 3
[profile.release.package.brotli]
opt-level = 3
[profile.release.package.brotli-decompressor]
opt-level = 3
[profile.release.package.bytes]
opt-level = 3
[profile.release.package.deno_bench_util]
opt-level = 3
[profile.release.package.deno_core]
opt-level = 3
[profile.release.package.deno_crypto]
opt-level = 3
[profile.release.package.deno_fetch]
opt-level = 3
[profile.release.package.deno_ffi]
opt-level = 3
[profile.release.package.deno_http]
opt-level = 3
[profile.release.package.deno_napi]
opt-level = 3
[profile.release.package.deno_net]
opt-level = 3
[profile.release.package.deno_node]
opt-level = 3
[profile.release.package.deno_runtime]
opt-level = 3
[profile.release.package.deno_tls]
opt-level = 3
[profile.release.package.deno_web]
opt-level = 3
[profile.release.package.deno_process]
opt-level = 3
[profile.release.package.deno_websocket]
opt-level = 3
[profile.release.package.fastwebsockets]
opt-level = 3
[profile.release.package.flate2]
opt-level = 3
[profile.release.package.futures-util]
opt-level = 3
[profile.release.package.futures-io]
opt-level = 3
[profile.release.package.futures-channel]
opt-level = 3
[profile.release.package.futures-sink]
opt-level = 3
[profile.release.package.futures-task]
opt-level = 3
[profile.release.package.futures-core]
opt-level = 3
[profile.release.package.hyper]
opt-level = 3
[profile.release.package.miniz_oxide]
opt-level = 3
[profile.release.package.num-bigint-dig]
opt-level = 3
[profile.release.package.rand]
opt-level = 3
[profile.release.package.serde]
opt-level = 3
[profile.release.package.serde_v8]
opt-level = 3
[profile.release.package.libsui]
opt-level = 3
[profile.release.package.test_napi]
opt-level = 3
[profile.release.package.tokio]
opt-level = 3
[profile.release.package.url]
opt-level = 3
[profile.release.package.v8]
opt-level = 3
[profile.release.package.zstd]
opt-level = 3
[profile.release.package.zstd-sys]
opt-level = 3
[profile.release.package.http]
opt-level = 3
[profile.release.package.http-body]
opt-level = 3
[profile.release.package.httparse]
opt-level = 3
[profile.release.package.mio]
opt-level = 3
[profile.release.package.fnv]
opt-level = 3
[profile.release.package.hyper-util]
opt-level = 3
[profile.release.package.httpdate]
opt-level = 3
[profile.release.package.deno_unsync]
opt-level = 3
[profile.release.package.deno_semver]
opt-level = 3
[profile.release.package.deno_npm]
opt-level = 3
[profile.release.package.deno_lockfile]
opt-level = 3
[profile.release.package.deno_npm_cache]
opt-level = 3
[package]
name = "starship"
version = "1.24.1"
authors = ["Starship Contributors"]
build = "build.rs"
categories = ["command-line-utilities"]
documentation = "https://starship.rs/guide/"
edition = "2024"
homepage = "https://starship.rs"
# Keep `/` in front of `README.md` to exclude localized readmes
include = [
  "src/**/*",
  "/starship.exe.manifest",
  "media/icon.ico",
  "build.rs",
  "LICENSE",
  "/README.md",
  "docs/public/presets/toml/",
  ".github/config-schema.json",
]
keywords = ["prompt", "shell", "bash", "fish", "zsh"]
license = "ISC"
readme = "README.md"
repository = "https://github.com/starship/starship"
# Note: MSRV is only intended as a hint, and only the latest version is officially supported in starship.
rust-version = "1.85"
description = """
The minimal, blazing-fast, and infinitely customizable prompt for any shell! ‚òÑüååÔ∏è
"""

[features]
default = ["battery", "notify"]
battery = ["starship-battery"]
config-schema = ["schemars"]
notify = ["notify-rust"]

[dependencies]
chrono = { version = "0.4.42", default-features = false, features = ["clock", "std", "wasmbind"] }
clap = { version = "4.5.53", features = ["derive", "cargo", "unicode"] }
clap_complete = "4.5.61"
clap_complete_nushell = "4.5.10"
dirs = "6.0.0"
dunce = "1.0.5"
# default feature restriction addresses https://github.com/starship/starship/issues/4251
gix = { version = "0.75.0", default-features = false, features = ["max-performance-safe", "revision", "zlib-rs", "status"] }
indexmap = { version = "2.12.1", features = ["serde"] }
jsonc-parser = { version = "0.28.0", features = ["serde"] }
log = { version = "0.4.28", features = ["std"] }
# notify-rust is optional (on by default) because the crate doesn't currently build for darwin with nix
# see: https://github.com/NixOS/nixpkgs/issues/160876
notify-rust = { version = "4.11.7", optional = true }
nu-ansi-term = "0.50.3"
open = "5.3.3"
# update os module config and tests when upgrading os_info
os_info = "3.13.0"
# for efficient shared state between `git_status` and `git_metrics`, allowing parallel printing. This is for poison-free locks.
parking_lot = "0.12.5"
path-slash = "0.2.1"
pest = "2.8.4"
pest_derive = "2.8.4"
process_control = "5.2.0"
quick-xml = "0.38.4"
rand = "0.9.2"
rayon = "1.11.0"
regex = { version = "1.12.2", default-features = false, features = ["perf", "std", "unicode-perl"] }
rust-ini = "0.21.3"
semver = "1.0.27"
serde = { version = "1.0.228", features = ["derive"] }
serde_json = "1.0.145"
sha1 = "0.10.6"
shadow-rs = { version = "1.4.0", default-features = false, features = ["build"] }
# battery is optional (on by default) because the crate doesn't currently build for Termux
# see: https://github.com/svartalf/rust-battery/issues/33
starship-battery = { version = "0.10.3", optional = true }
strsim = "0.11.1"
systemstat = "=0.2.5"
terminal_size = "0.4.3"
toml = { version = "0.9.8", features = ["preserve_order"] }
toml_edit = "0.23.7"
unicode-segmentation = "1.12.0"
unicode-width = "0.2.2"
urlencoding = "2.1.3"
versions = "7.0.0"
which = "8.0.0"
whoami = { version = "1.6.1", default-features = false }
yaml-rust2 = "0.10.4"

guess_host_triple = "0.1.5"
home = "0.5.12"
shell-words = "1.1.0"

[dependencies.schemars]
version = "1.1.0"
optional = true
features = ["preserve_order", "indexmap2"]

[target.'cfg(windows)'.dependencies]
deelevate = "0.2.0"

[target.'cfg(windows)'.dependencies.windows]
version = "0.62.2"
features = [
  "Win32_Foundation",
  "Win32_UI_Shell",
  "Win32_Security",
  "Win32_System_Threading",
  "Win32_Storage_FileSystem",
]

[target.'cfg(not(windows))'.dependencies]
nix = { version = "0.30.1", default-features = false, features = ["feature", "fs", "user"] }

[build-dependencies]
shadow-rs = { version = "1.4.0", default-features = false, features = ["build"] }
dunce = "1.0.5"

[target.'cfg(windows)'.build-dependencies]
winres = "0.1.12"

[dev-dependencies]
mockall = "0.14.0"
tempfile = "3.23.0"

[profile.release]
codegen-units = 1
lto = true
strip = true

[profile.bench]
codegen-units = 16
lto = "thin"
strip = false

[lints.clippy]
use_self = "warn"
[package]
authors = ["David Peter <mail@david-peter.de>"]
categories = ["command-line-utilities"]
description = "A cat(1) clone with wings."
homepage = "https://github.com/sharkdp/bat"
license = "MIT OR Apache-2.0"
name = "bat"
repository = "https://github.com/sharkdp/bat"
version = "0.26.0"
exclude = ["assets/syntaxes/*", "assets/themes/*"]
build = "build/main.rs"
edition = '2021'
# You are free to bump MSRV as soon as a reason for bumping emerges.
rust-version = "1.87"

[features]
default = ["application", "git"]
# Feature required for bat the application. Should be disabled when depending on
# bat as a library.
application = [
    "bugreport",
    "build-assets",
    "minimal-application",
]
# Mainly for developers that want to iterate quickly
# Be aware that the included features might change in the future
minimal-application = [
    "clap",
    "etcetera",
    "paging",
    "regex-onig",
    "wild",
]
git = ["git2"] # Support indicating git modifications
vendored-libgit2 = ["git2/vendored-libgit2"]
paging = [ "shell-words", "grep-cli", "minus"] # Support applying a pager on the output
lessopen = ["execute"] # Support $LESSOPEN preprocessor
build-assets = ["syntect/yaml-load", "syntect/plist-load", "regex", "walkdir"]

# You need to use one of these if you depend on bat as a library:
regex-onig = ["syntect/regex-onig"] # Use the "oniguruma" regex engine
regex-fancy = ["syntect/regex-fancy"] # Use the rust-only "fancy-regex" engine

[dependencies]
nu-ansi-term = "0.50.0"
ansi_colours = "^1.2"
bincode = "1.0"
console = "0.16.0"
flate2 = "1.1"
once_cell = "1.20"
thiserror = "2.0"
wild = { version = "2.2", optional = true }
content_inspector = "0.2.4"
shell-words = { version = "1.1.0", optional = true }
minus = { version = "5.6", optional = true, features = [
  "dynamic_output",
  "search",
] }
unicode-width = "0.2.1"
globset = "0.4"
serde = "1.0"
serde_derive = "1.0"
serde_yaml = "0.9.28"
semver = "1.0"
path_abs = { version = "0.5", default-features = false }
clircle = { version = "0.6.1", default-features = false }
bugreport = { version = "0.5.0", optional = true }
etcetera = { version = "0.11.0", optional = true }
grep-cli = { version = "0.1.11", optional = true }
regex = { version = "1.12.2", optional = true }
walkdir = { version = "2.5", optional = true }
bytesize = { version = "1.3.0" }
encoding_rs = "0.8.35"
execute = { version = "0.2.13", optional = true }
terminal-colorsaurus = "1.0"
unicode-segmentation = "1.12.0"
itertools = "0.14.0"

[dependencies.git2]
version = "0.20"
optional = true
default-features = false

[dependencies.syntect]
version = "5.3.0"
default-features = false
features = ["parsing"]

[dependencies.clap]
version = "4.5.46"
optional = true
features = ["wrap_help", "cargo"]

[target.'cfg(target_os = "macos")'.dependencies]
plist = "1.7.0"

[dev-dependencies]
assert_cmd = "2.0.12"
expect-test = "1.5.0"
serial_test = { version = "2.0.0", default-features = false }
predicates = "3.1.3"
wait-timeout = "0.2.1"
tempfile = "3.16.0"
serde = { version = "1.0", features = ["derive"] }

[target.'cfg(unix)'.dev-dependencies]
nix = { version = "0.30", default-features = false, features = ["term"] }

[build-dependencies]
anyhow = "1.0.97"
indexmap = { version = "2.8.0", features = ["serde"] }
itertools = "0.14.0"
once_cell = "1.20"
prettyplease = "0.2.37"
proc-macro2 = "1.0.95"
quote = "1.0.40"
regex = "1.12.2"
serde = "1.0"
serde_derive = "1.0"
serde_with = { version = "3.15.1", default-features = false, features = ["macros"] }
syn = { version = "2.0.104", features = ["full"] }
toml = { version = "0.9.1", features = ["preserve_order"] }
walkdir = "2.5"

[build-dependencies.clap]
version = "4.5.46"
optional = true
features = ["wrap_help", "cargo"]

[profile.release]
lto = true
strip = true
codegen-units = 1
[package]
name = "ripgrep"
version = "15.1.0"  #:version
authors = ["Andrew Gallant <jamslam@gmail.com>"]
description = """
ripgrep is a line-oriented search tool that recursively searches the current
directory for a regex pattern while respecting gitignore rules. ripgrep has
first class support on Windows, macOS and Linux.
"""
documentation = "https://github.com/BurntSushi/ripgrep"
homepage = "https://github.com/BurntSushi/ripgrep"
repository = "https://github.com/BurntSushi/ripgrep"
keywords = ["regex", "grep", "egrep", "search", "pattern"]
categories = ["command-line-utilities", "text-processing"]
license = "Unlicense OR MIT"
exclude = [
  "HomebrewFormula",
  "/.github/",
  "/ci/",
  "/pkg/brew",
  "/benchsuite/",
  "/scripts/",
  "/crates/fuzz",
]
build = "build.rs"
autotests = false
edition = "2024"
rust-version = "1.85"

[[bin]]
bench = false
path = "crates/core/main.rs"
name = "rg"

[[test]]
name = "integration"
path = "tests/tests.rs"

[workspace]
members = [
  "crates/globset",
  "crates/grep",
  "crates/cli",
  "crates/matcher",
  "crates/pcre2",
  "crates/printer",
  "crates/regex",
  "crates/searcher",
  "crates/ignore",
]

[dependencies]
anyhow = "1.0.75"
bstr = "1.7.0"
grep = { version = "0.4.1", path = "crates/grep" }
ignore = { version = "0.4.24", path = "crates/ignore" }
lexopt = "0.3.0"
log = "0.4.5"
serde_json = "1.0.23"
termcolor = "1.1.0"
textwrap = { version = "0.16.0", default-features = false }

[target.'cfg(all(target_env = "musl", target_pointer_width = "64"))'.dependencies.tikv-jemallocator]
version = "0.6.0"

[dev-dependencies]
serde = "1.0.77"
serde_derive = "1.0.77"
walkdir = "2"

[features]
pcre2 = ["grep/pcre2"]

[profile.release]
debug = 1

[profile.release-lto]
inherits = "release"
opt-level = 3
debug = "none"
strip = "symbols"
debug-assertions = false
overflow-checks = false
lto = "fat"
panic = "abort"
incremental = false
codegen-units = 1

[profile.deb]
inherits = "release-lto"

[package.metadata.deb]
features = ["pcre2"]
section = "utils"
assets = [
  ["target/release/rg", "usr/bin/", "755"],
  ["COPYING", "usr/share/doc/ripgrep/", "644"],
  ["LICENSE-MIT", "usr/share/doc/ripgrep/", "644"],
  ["UNLICENSE", "usr/share/doc/ripgrep/", "644"],
  ["CHANGELOG.md", "usr/share/doc/ripgrep/CHANGELOG", "644"],
  ["README.md", "usr/share/doc/ripgrep/README", "644"],
  ["FAQ.md", "usr/share/doc/ripgrep/FAQ", "644"],
  # The man page is automatically generated by ripgrep's build process, so
  # this file isn't actually committed. Instead, to create a dpkg, either
  # create a deployment/deb directory and copy the man page to it, or use the
  # 'ci/build-deb' script.
  ["deployment/deb/rg.1", "usr/share/man/man1/rg.1", "644"],
  # Similarly for shell completions.
  ["deployment/deb/rg.bash", "usr/share/bash-completion/completions/rg", "644"],
  ["deployment/deb/rg.fish", "usr/share/fish/vendor_completions.d/rg.fish", "644"],
  ["deployment/deb/_rg", "usr/share/zsh/vendor-completions/", "644"],
]
extended-description = """\
ripgrep (rg) recursively searches your current directory for a regex pattern.
By default, ripgrep will respect your .gitignore and automatically skip hidden
files/directories and binary files.
"""
